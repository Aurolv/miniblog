<% content_for :title, @post.title %>

<div class="post-show-wrapper">
  <% if notice.present? %>
    <div id="notice" class="post-notice"><%= notice %></div>
  <% end %>

  <article class="post-article">
    <h1 class="post-title"><%= @post.title %></h1>

    <div class="post-meta">
      <div class="post-author">
        <div class="post-avatar"><%= @post.user&.name&.first&.upcase || "U" %></div>
        <span><%= @post.user&.name.presence || @post.user&.email %></span>
      </div>

      <span>â€¢</span>

      <time datetime="<%= (@post.published_at || @post.created_at).iso8601 %>">
        <%= l(@post.published_at || @post.created_at, format: :long) %>
      </time>

      <span class="post-status <%= @post.published? ? 'post-status--published' : 'post-status--draft' %>">
        <%= @post.status.capitalize %>
      </span>
    </div>

    <div class="post-body">
      <%= simple_format(h(@post.body)) %>
    </div>

    <div class="post-actions">
      <% if current_user && (@post.user_id == current_user.id || current_user.admin?) %>
        <%= link_to edit_post_path(@post), class: "btn-outline" do %>
          <svg class="h-4 w-4 text-slate-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 3.487a2.25 2.25 0 0 1 3.182 3.182L8.25 18.463l-4.5 1.125L4.875 15l11.987-11.513z"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 5l4 4"/>
          </svg>
          Edit
        <% end %>

        <%= button_to @post, method: :delete, class: "btn-danger",
              data: { turbo_confirm: "Are you sure you want to delete this post?" } do %>
          <svg class="h-4 w-4 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 7h12M9 7V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2M19 7l-1 12a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 7"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M10 11v6M14 11v6"/>
          </svg>
          Destroy
        <% end %>
      <% end %>

      <%= link_to posts_path, class: "btn-outline" do %>
        <svg class="h-4 w-4 text-slate-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
        </svg>
        Back
      <% end %>
    </div>
  </article>
</div>
