<% content_for :title, @post.title %>

<div class="max-w-3xl mx-auto">
  <% if notice.present? %>
    <div id="notice" class="mb-6 rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-2 text-emerald-700 text-sm">
      <%= notice %>
    </div>
  <% end %>

  <article class="rounded-2xl bg-white/80 backdrop-blur-sm shadow-md ring-1 ring-slate-200 p-6 md:p-8">
    <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight text-slate-900 mb-4">
      <%= @post.title %>
    </h1>

    <div class="flex items-center gap-3 text-sm text-slate-500 mb-6">
      <div class="flex items-center gap-2">
        <div class="h-8 w-8 rounded-full bg-indigo-200 flex items-center justify-center text-indigo-700 font-semibold">
          <%= @post.user&.name&.first&.upcase || "U" %>
        </div>
        <span><%= @post.user&.name || @post.user&.email %></span>
      </div>
      <span>â€¢</span>
      <time><%= l(@post.published_at || @post.created_at, format: :long) %></time>
      <span class="ml-auto px-2 py-0.5 rounded-full text-xs font-medium
                   <%= @post.status == "published" ? "bg-emerald-100 text-emerald-700" : "bg-slate-100 text-slate-600" %>">
        <%= @post.status.capitalize %>
      </span>
    </div>

    <div class="prose prose-slate max-w-none mb-8">
      <%= simple_format(@post.body) %>
    </div>

    <div class="flex flex-wrap gap-3">
      <%= link_to edit_post_path(@post),
            class: "inline-flex items-center gap-2 rounded-lg border border-slate-300 bg-white/70 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition" do %>
        <svg class="h-4 w-4 text-slate-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 3.487a2.25 2.25 0 0 1 3.182 3.182L8.25 18.463l-4.5 1.125L4.875 15l11.987-11.513z"/>
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 5l4 4"/>
        </svg>
        Edit
      <% end %>

      <%= link_to posts_path,
            class: "inline-flex items-center gap-2 rounded-lg border border-slate-300 bg-white/70 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition" do %>
        <!-- arrow-left icon -->
        <svg class="h-4 w-4 text-slate-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
        </svg>
        Back
      <% end %>

      <%= button_to @post, method: :delete,
            class: "inline-flex items-center gap-2 rounded-lg bg-rose-600 px-4 py-2 text-sm font-medium text-white hover:bg-rose-500 transition",
            data: { turbo_confirm: "Are you sure?" } do %>
        <svg class="h-4 w-4 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 7h12M9 7V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2M19 7l-1 12a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 7"/>
          <path stroke-linecap="round" stroke-linejoin="round" d="M10 11v6M14 11v6"/>
        </svg>
        Destroy
      <% end %>
    </div>
  </article>
</div>
